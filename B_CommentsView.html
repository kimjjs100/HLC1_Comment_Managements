<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>대선주 코멘트 대응 관리 시스템 - 코멘트 상세 뷰</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            box-sizing: border-box;
        }
        .comment-card {
            transition: all 0.3s ease;
        }
        .comment-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }
        .status-badge {
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }
        .priority-indicator {
            animation: bounce 1s infinite;
        }
        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-10px); }
            60% { transform: translateY(-5px); }
        }
        .timeline-item {
            position: relative;
        }
        .timeline-item::before {
            content: '';
            position: absolute;
            left: 15px;
            top: 40px;
            bottom: -10px;
            width: 2px;
            background: #e5e7eb;
        }
        .timeline-item:last-child::before {
            display: none;
        }
        .attachment-preview {
            transition: all 0.2s ease;
        }
        .attachment-preview:hover {
            transform: scale(1.05);
        }
        .heatmap-cell {
            transition: all 0.2s ease;
        }
        .heatmap-cell:hover {
            transform: scale(1.1);
            z-index: 10;
        }
    </style>
</head>
<body class="bg-gray-50 min-h-full">
    <header class="bg-white shadow-sm border-b">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center">
                    <button onclick="goBack()" class="mr-4 p-2 text-gray-400 hover:text-gray-600">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                        </svg>
                    </button>
                    <h1 class="text-xl font-bold text-gray-900">코멘트 상세 관리</h1>
                    <span class="ml-3 px-2 py-1 bg-blue-100 text-blue-800 text-xs font-medium rounded-full">CM-2024-0156</span>
                </div>
                <div class="flex items-center space-x-4">
                    <button onclick="exportComment()" class="px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300">내보내기</button>
                    <button onclick="shareComment()" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700">공유</button>
                </div>
            </div>
        </div>
    </header>

    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6">
        <div class="grid grid-cols-1 lg:grid-cols-4 gap-6">
            <!-- 사이드바 -->
            <div class="lg:col-span-1 space-y-6">
                <!-- 코멘트 목록 -->
                <div class="bg-white rounded-lg shadow p-6">
                    <h3 class="text-lg font-semibold text-gray-900 mb-4">관련 코멘트</h3>
                    
                    <div class="space-y-3">
                        <div class="comment-card border border-blue-200 bg-blue-50 rounded-lg p-3 cursor-pointer" data-comment-id="CM-2024-0156" onclick="selectComment('CM-2024-0156')">
                            <div class="flex items-center justify-between mb-2">
                                <span class="text-sm font-medium text-blue-900">CM-2024-0156</span>
                                <span class="text-xs bg-red-100 text-red-800 px-2 py-1 rounded-full priority-indicator">긴급</span>
                            </div>
                            <p class="text-xs text-blue-700 mb-2">파이프 라인 간섭 문제로 인한 설계 변경 요청</p>
                            <div class="flex items-center justify-between">
                                <span class="text-xs text-blue-600">현대중공업</span>
                                <span class="text-xs text-blue-600">2024.03.15</span>
                            </div>
                        </div>
                        
                        <div class="comment-card border border-gray-200 rounded-lg p-3 cursor-pointer" data-comment-id="CM-2024-0155" onclick="selectComment('CM-2024-0155')">
                            <div class="flex items-center justify-between mb-2">
                                <span class="text-sm font-medium text-gray-900">CM-2024-0155</span>
                                <span class="text-xs bg-yellow-100 text-yellow-800 px-2 py-1 rounded-full">보통</span>
                            </div>
                            <p class="text-xs text-gray-700 mb-2">안전 규정 준수 확인 요청</p>
                            <div class="flex items-center justify-between">
                                <span class="text-xs text-gray-600">현대중공업</span>
                                <span class="text-xs text-gray-600">2024.03.14</span>
                            </div>
                        </div>
                        
                        <div class="comment-card border border-gray-200 rounded-lg p-3 cursor-pointer" data-comment-id="CM-2024-0154" onclick="selectComment('CM-2024-0154')">
                            <div class="flex items-center justify-between mb-2">
                                <span class="text-sm font-medium text-gray-900">CM-2024-0154</span>
                                <span class="text-xs bg-green-100 text-green-800 px-2 py-1 rounded-full">낮음</span>
                            </div>
                            <p class="text-xs text-gray-700 mb-2">도면 수정 사항 반영 요청</p>
                            <div class="flex items-center justify-between">
                                <span class="text-xs text-gray-600">삼성중공업</span>
                                <span class="text-xs text-gray-600">2024.03.13</span>
                            </div>
                        </div>
                        
                        <div class="comment-card border border-gray-200 rounded-lg p-3 cursor-pointer" data-comment-id="CM-2024-0153" onclick="selectComment('CM-2024-0153')">
                            <div class="flex items-center justify-between mb-2">
                                <span class="text-sm font-medium text-gray-900">CM-2024-0153</span>
                                <span class="text-xs bg-orange-100 text-orange-800 px-2 py-1 rounded-full">높음</span>
                            </div>
                            <p class="text-xs text-gray-700 mb-2">품질 검사 기준 명확화 요청</p>
                            <div class="flex items-center justify-between">
                                <span class="text-xs text-gray-600">대우조선해양</span>
                                <span class="text-xs text-gray-600">2024.03.12</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 빠른 액션 -->
                <div class="bg-white rounded-lg shadow p-6">
                    <h3 class="text-lg font-semibold text-gray-900 mb-4">빠른 액션</h3>
                    
                    <div class="space-y-3">
                        <button onclick="respondToComment()" class="w-full flex items-center justify-center space-x-2 px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6"></path>
                            </svg>
                            <span>답변 작성</span>
                        </button>
                        
                        <button onclick="assignTask()" class="w-full flex items-center justify-center space-x-2 px-4 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
                            </svg>
                            <span>업무 할당</span>
                        </button>
                        
                        <button onclick="scheduleFollowUp()" class="w-full flex items-center justify-center space-x-2 px-4 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                            </svg>
                            <span>후속 일정</span>
                        </button>
                        
                        <button onclick="escalateIssue()" class="w-full flex items-center justify-center space-x-2 px-4 py-3 bg-red-600 text-white rounded-lg hover:bg-red-700">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"></path>
                            </svg>
                            <span>에스컬레이션</span>
                        </button>
                    </div>
                </div>

                <!-- 관련 문서 -->
                <div class="bg-white rounded-lg shadow p-6">
                    <h3 class="text-lg font-semibold text-gray-900 mb-4">관련 문서</h3>
                    
                    <div class="space-y-3">
                        <div class="flex items-center space-x-3 p-2 border border-gray-200 rounded-lg attachment-preview">
                            <svg class="w-6 h-6 text-red-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"></path>
                            </svg>
                            <div class="flex-1">
                                <p class="text-sm font-medium text-gray-900">설계도면_Rev3.pdf</p>
                                <p class="text-xs text-gray-500">2.3 MB • 2024.03.15</p>
                            </div>
                        </div>
                        
                        <div class="flex items-center space-x-3 p-2 border border-gray-200 rounded-lg attachment-preview">
                            <svg class="w-6 h-6 text-blue-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                            </svg>
                            <div class="flex-1">
                                <p class="text-sm font-medium text-gray-900">안전검토서.docx</p>
                                <p class="text-xs text-gray-500">1.8 MB • 2024.03.14</p>
                            </div>
                        </div>
                        
                        <div class="flex items-center space-x-3 p-2 border border-gray-200 rounded-lg attachment-preview">
                            <svg class="w-6 h-6 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2-2z"></path>
                            </svg>
                            <div class="flex-1">
                                <p class="text-sm font-medium text-gray-900">비용분석.xlsx</p>
                                <p class="text-xs text-gray-500">856 KB • 2024.03.13</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 메인 콘텐츠 영역 -->
            <div class="lg:col-span-2 space-y-6">
                <!-- 아이젠하워 매트릭스 -->
                <div class="bg-white rounded-lg shadow p-6">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-lg font-semibold text-gray-900">내용분석 기반 위험도 추정</h3>
                        <div class="flex items-center space-x-2">
                            <span class="text-xs bg-purple-100 text-purple-800 px-2 py-1 rounded-full">AI 분석</span>
                            <button onclick="refreshRiskAnalysis()" class="p-1 text-gray-400 hover:text-gray-600">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
                                </svg>
                            </button>
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-2 gap-4 mb-4">
                        <!-- 1사분면: 긴급하고 중요함 (Do First) -->
                        <div class="border-2 border-red-300 bg-red-50 rounded-lg p-4">
                            <div class="flex items-center justify-between mb-3">
                                <h4 class="text-sm font-semibold text-red-800">긴급하고 중요함</h4>
                                <span class="text-xs bg-red-200 text-red-800 px-2 py-1 rounded-full">즉시 처리</span>
                            </div>
                            <div class="space-y-2" id="quadrant1">
                                <div class="bg-white border border-red-200 rounded p-2 cursor-pointer hover:bg-red-25" onclick="selectComment('CM-2024-0156')">
                                    <div class="flex items-center justify-between mb-1">
                                        <span class="text-xs font-medium text-red-900">CM-2024-0156</span>
                                        <span class="text-xs text-red-600">위험도: 95%</span>
                                    </div>
                                    <p class="text-xs text-red-700">파이프 라인 간섭으로 인한 안전 문제</p>
                                    <div class="flex items-center mt-1 space-x-2">
                                        <span class="text-xs bg-red-100 text-red-700 px-1 rounded">긴급성: 높음</span>
                                        <span class="text-xs bg-red-100 text-red-700 px-1 rounded">중요도: 높음</span>
                                    </div>
                                </div>
                                
                                <div class="bg-white border border-red-200 rounded p-2 cursor-pointer hover:bg-red-25" onclick="selectComment('CM-2024-0143')">
                                    <div class="flex items-center justify-between mb-1">
                                        <span class="text-xs font-medium text-red-900">CM-2024-0143</span>
                                        <span class="text-xs text-red-600">위험도: 88%</span>
                                    </div>
                                    <p class="text-xs text-red-700">구조 강도 부족 - 즉시 보강 필요</p>
                                    <div class="flex items-center mt-1 space-x-2">
                                        <span class="text-xs bg-red-100 text-red-700 px-1 rounded">긴급성: 높음</span>
                                        <span class="text-xs bg-red-100 text-red-700 px-1 rounded">중요도: 높음</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 2사분면: 중요하지만 긴급하지 않음 (Schedule) -->
                        <div class="border-2 border-orange-300 bg-orange-50 rounded-lg p-4">
                            <div class="flex items-center justify-between mb-3">
                                <h4 class="text-sm font-semibold text-orange-800">중요하지만 긴급하지 않음</h4>
                                <span class="text-xs bg-orange-200 text-orange-800 px-2 py-1 rounded-full">계획 수립</span>
                            </div>
                            <div class="space-y-2" id="quadrant2">
                                <div class="bg-white border border-orange-200 rounded p-2 cursor-pointer hover:bg-orange-25" onclick="selectComment('CM-2024-0134')">
                                    <div class="flex items-center justify-between mb-1">
                                        <span class="text-xs font-medium text-orange-900">CM-2024-0134</span>
                                        <span class="text-xs text-orange-600">위험도: 72%</span>
                                    </div>
                                    <p class="text-xs text-orange-700">장기 내구성 개선 방안 검토</p>
                                    <div class="flex items-center mt-1 space-x-2">
                                        <span class="text-xs bg-orange-100 text-orange-700 px-1 rounded">긴급성: 낮음</span>
                                        <span class="text-xs bg-orange-100 text-orange-700 px-1 rounded">중요도: 높음</span>
                                    </div>
                                </div>
                                
                                <div class="bg-white border border-orange-200 rounded p-2 cursor-pointer hover:bg-orange-25" onclick="selectComment('CM-2024-0128')">
                                    <div class="flex items-center justify-between mb-1">
                                        <span class="text-xs font-medium text-orange-900">CM-2024-0128</span>
                                        <span class="text-xs text-orange-600">위험도: 65%</span>
                                    </div>
                                    <p class="text-xs text-orange-700">효율성 향상을 위한 설계 최적화</p>
                                    <div class="flex items-center mt-1 space-x-2">
                                        <span class="text-xs bg-orange-100 text-orange-700 px-1 rounded">긴급성: 낮음</span>
                                        <span class="text-xs bg-orange-100 text-orange-700 px-1 rounded">중요도: 높음</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 3사분면: 긴급하지만 중요하지 않음 (Delegate) -->
                        <div class="border-2 border-yellow-300 bg-yellow-50 rounded-lg p-4">
                            <div class="flex items-center justify-between mb-3">
                                <h4 class="text-sm font-semibold text-yellow-800">긴급하지만 중요하지 않음</h4>
                                <span class="text-xs bg-yellow-200 text-yellow-800 px-2 py-1 rounded-full">위임 처리</span>
                            </div>
                            <div class="space-y-2" id="quadrant3">
                                <div class="bg-white border border-yellow-200 rounded p-2 cursor-pointer hover:bg-yellow-25" onclick="selectComment('CM-2024-0121')">
                                    <div class="flex items-center justify-between mb-1">
                                        <span class="text-xs font-medium text-yellow-900">CM-2024-0121</span>
                                        <span class="text-xs text-yellow-600">위험도: 45%</span>
                                    </div>
                                    <p class="text-xs text-yellow-700">문서 양식 수정 요청</p>
                                    <div class="flex items-center mt-1 space-x-2">
                                        <span class="text-xs bg-yellow-100 text-yellow-700 px-1 rounded">긴급성: 높음</span>
                                        <span class="text-xs bg-yellow-100 text-yellow-700 px-1 rounded">중요도: 낮음</span>
                                    </div>
                                </div>
                                
                                <div class="bg-white border border-yellow-200 rounded p-2 cursor-pointer hover:bg-yellow-25" onclick="selectComment('CM-2024-0115')">
                                    <div class="flex items-center justify-between mb-1">
                                        <span class="text-xs font-medium text-yellow-900">CM-2024-0115</span>
                                        <span class="text-xs text-yellow-600">위험도: 38%</span>
                                    </div>
                                    <p class="text-xs text-yellow-700">회의록 형식 변경 요청</p>
                                    <div class="flex items-center mt-1 space-x-2">
                                        <span class="text-xs bg-yellow-100 text-yellow-700 px-1 rounded">긴급성: 높음</span>
                                        <span class="text-xs bg-yellow-100 text-yellow-700 px-1 rounded">중요도: 낮음</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 4사분면: 긴급하지도 중요하지도 않음 (Eliminate) -->
                        <div class="border-2 border-green-300 bg-green-50 rounded-lg p-4">
                            <div class="flex items-center justify-between mb-3">
                                <h4 class="text-sm font-semibold text-green-800">긴급하지도 중요하지도 않음</h4>
                                <span class="text-xs bg-green-200 text-green-800 px-2 py-1 rounded-full">후순위</span>
                            </div>
                            <div class="space-y-2" id="quadrant4">
                                <div class="bg-white border border-green-200 rounded p-2 cursor-pointer hover:bg-green-25" onclick="selectComment('CM-2024-0108')">
                                    <div class="flex items-center justify-between mb-1">
                                        <span class="text-xs font-medium text-green-900">CM-2024-0108</span>
                                        <span class="text-xs text-green-600">위험도: 22%</span>
                                    </div>
                                    <p class="text-xs text-green-700">색상 변경 제안</p>
                                    <div class="flex items-center mt-1 space-x-2">
                                        <span class="text-xs bg-green-100 text-green-700 px-1 rounded">긴급성: 낮음</span>
                                        <span class="text-xs bg-green-100 text-green-700 px-1 rounded">중요도: 낮음</span>
                                    </div>
                                </div>
                                
                                <div class="bg-white border border-green-200 rounded p-2 cursor-pointer hover:bg-green-25" onclick="selectComment('CM-2024-0102')">
                                    <div class="flex items-center justify-between mb-1">
                                        <span class="text-xs font-medium text-green-900">CM-2024-0102</span>
                                        <span class="text-xs text-green-600">위험도: 15%</span>
                                    </div>
                                    <p class="text-xs text-green-700">로고 위치 조정 요청</p>
                                    <div class="flex items-center mt-1 space-x-2">
                                        <span class="text-xs bg-green-100 text-green-700 px-1 rounded">긴급성: 낮음</span>
                                        <span class="text-xs bg-green-100 text-green-700 px-1 rounded">중요도: 낮음</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 분석 요약 -->
                    <div class="bg-gray-50 rounded-lg p-4">
                        <h4 class="text-sm font-semibold text-gray-900 mb-3">AI 분석 요약</h4>
                        <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                            <div class="text-center">
                                <div class="text-lg font-bold text-red-600">2건</div>
                                <div class="text-xs text-gray-600">즉시 처리</div>
                            </div>
                            <div class="text-center">
                                <div class="text-lg font-bold text-orange-600">2건</div>
                                <div class="text-xs text-gray-600">계획 수립</div>
                            </div>
                            <div class="text-center">
                                <div class="text-lg font-bold text-yellow-600">2건</div>
                                <div class="text-xs text-gray-600">위임 처리</div>
                            </div>
                            <div class="text-center">
                                <div class="text-lg font-bold text-green-600">2건</div>
                                <div class="text-xs text-gray-600">후순위</div>
                            </div>
                        </div>
                        
                        <div class="mt-4 p-3 bg-blue-50 rounded-lg">
                            <div class="flex items-start space-x-2">
                                <svg class="w-4 h-4 text-blue-500 mt-0.5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                </svg>
                                <div>
                                    <p class="text-xs font-medium text-blue-800">추천 액션 플랜</p>
                                    <p class="text-xs text-blue-700 mt-1">1. 즉시 처리 항목 2건을 우선 해결하세요. 2. 중요한 장기 과제는 다음 주 계획에 포함하세요. 3. 위임 가능한 업무는 적절한 담당자에게 배정하세요.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 코멘트 상세 정보 -->
                <div class="bg-white rounded-lg shadow p-6">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-lg font-semibold text-gray-900">코멘트 상세 정보</h3>
                        <div class="flex space-x-2">
                            <button onclick="editComment()" class="px-3 py-1 text-sm bg-blue-100 text-blue-700 rounded hover:bg-blue-200">편집</button>
                            <button onclick="duplicateComment()" class="px-3 py-1 text-sm bg-gray-100 text-gray-700 rounded hover:bg-gray-200">복제</button>
                        </div>
                    </div>
                    
                    <div class="space-y-4" id="commentDetails">
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">코멘트 ID</label>
                                <p class="text-sm text-gray-900">CM-2024-0156</p>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">선주사</label>
                                <p class="text-sm text-gray-900">현대중공업</p>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">카테고리</label>
                                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800">설계 변경</span>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">우선순위</label>
                                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800 status-badge">긴급</span>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">등록일</label>
                                <p class="text-sm text-gray-900">2024년 3월 15일</p>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">마감일</label>
                                <p class="text-sm text-red-600 font-medium">2024년 3월 17일 (2일 남음)</p>
                            </div>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">코멘트 내용</label>
                            <div class="bg-gray-50 rounded-lg p-4">
                                <p class="text-sm text-gray-900 leading-relaxed">
                                    엔진실 내 냉각수 파이프 라인과 연료 공급 라인 간의 간섭이 발생하고 있습니다. 
                                    현재 설계상 두 파이프 간의 거리가 450mm로 안전 기준인 700mm에 미달합니다. 
                                    이로 인해 진동 및 열팽창 시 파이프 간 충돌 위험이 있어 즉시 설계 변경이 필요합니다.
                                    <br><br>
                                    요청사항:
                                    <br>1. 파이프 라인 재배치를 통한 안전 간격 확보
                                    <br>2. 구조적 보강재 추가 검토
                                    <br>3. 변경된 설계에 대한 구조 해석 수행
                                </p>
                            </div>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">기술적 영향도</label>
                            <div class="bg-red-50 border border-red-200 rounded-lg p-4">
                                <div class="flex items-start space-x-3">
                                    <svg class="w-5 h-5 text-red-500 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"></path>
                                    </svg>
                                    <div>
                                        <h4 class="text-sm font-medium text-red-800">높은 위험도</h4>
                                        <p class="text-sm text-red-700 mt-1">안전 기준 미달로 인한 운항 중 사고 위험. 즉시 조치 필요.</p>
                                        <ul class="text-sm text-red-700 mt-2 list-disc list-inside">
                                            <li>파이프 파손으로 인한 냉각수 누출 가능성</li>
                                            <li>연료 공급 중단으로 인한 엔진 정지 위험</li>
                                            <li>수리 비용 및 일정 지연 예상</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 답변 작성 -->
                <div class="bg-white rounded-lg shadow p-6">
                    <h3 class="text-lg font-semibold text-gray-900 mb-4">답변 작성</h3>
                    
                    <form onsubmit="submitResponse(event)">
                        <div class="mb-4">
                            <label for="responseType" class="block text-sm font-medium text-gray-700 mb-2">답변 유형</label>
                            <select id="responseType" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                <option value="technical">기술적 답변</option>
                                <option value="schedule">일정 관련</option>
                                <option value="cost">비용 관련</option>
                                <option value="clarification">추가 확인 필요</option>
                            </select>
                        </div>
                        
                        <div class="mb-4">
                            <label for="responseContent" class="block text-sm font-medium text-gray-700 mb-2">답변 내용</label>
                            <textarea id="responseContent" rows="6" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="답변 내용을 입력하세요..."></textarea>
                        </div>
                        
                        <div class="mb-4">
                            <label for="attachments" class="block text-sm font-medium text-gray-700 mb-2">첨부 파일</label>
                            <div class="border-2 border-dashed border-gray-300 rounded-lg p-6 text-center">
                                <svg class="mx-auto h-12 w-12 text-gray-400" stroke="currentColor" fill="none" viewBox="0 0 48 48">
                                    <path d="M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                                </svg>
                                <div class="mt-4">
                                    <label for="file-upload" class="cursor-pointer">
                                        <span class="mt-2 block text-sm font-medium text-gray-900">파일을 드래그하거나 클릭하여 업로드</span>
                                        <input id="file-upload" name="file-upload" type="file" class="sr-only" multiple>
                                    </label>
                                    <p class="mt-1 text-xs text-gray-500">PNG, JPG, PDF 최대 10MB</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="flex justify-between">
                            <div class="flex space-x-2">
                                <button type="button" onclick="saveAsDraft()" class="px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300">임시저장</button>
                                <button type="button" onclick="useTemplate()" class="px-4 py-2 bg-purple-100 text-purple-700 rounded-lg hover:bg-purple-200">템플릿 사용</button>
                            </div>
                            <div class="flex space-x-2">
                                <button type="button" onclick="previewResponse()" class="px-4 py-2 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200">미리보기</button>
                                <button type="submit" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700">답변 전송</button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>

            <!-- 우측 사이드바 -->
            <div class="lg:col-span-1 space-y-6">
                <!-- 처리 현황 -->
                <div class="bg-white rounded-lg shadow p-6">
                    <h3 class="text-lg font-semibold text-gray-900 mb-4">처리 현황</h3>
                    
                    <div class="space-y-4">
                        <div class="flex items-center justify-between">
                            <span class="text-sm text-gray-600">전체 진행률</span>
                            <span class="text-sm font-medium text-gray-900">35%</span>
                        </div>
                        <div class="w-full bg-gray-200 rounded-full h-2">
                            <div class="bg-blue-600 h-2 rounded-full" style="width: 35%"></div>
                        </div>
                        
                        <div class="space-y-2">
                            <div class="flex items-center justify-between text-sm">
                                <span class="text-gray-600">접수</span>
                                <span class="text-green-600">완료</span>
                            </div>
                            <div class="flex items-center justify-between text-sm">
                                <span class="text-gray-600">검토</span>
                                <span class="text-blue-600">진행중</span>
                            </div>
                            <div class="flex items-center justify-between text-sm">
                                <span class="text-gray-600">답변</span>
                                <span class="text-gray-400">대기</span>
                            </div>
                            <div class="flex items-center justify-between text-sm">
                                <span class="text-gray-600">승인</span>
                                <span class="text-gray-400">대기</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 담당자 정보 -->
                <div class="bg-white rounded-lg shadow p-6">
                    <h3 class="text-lg font-semibold text-gray-900 mb-4">담당자 정보</h3>
                    
                    <div class="space-y-4">
                        <div class="flex items-center space-x-3">
                            <div class="w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center">
                                <span class="text-white font-medium">김</span>
                            </div>
                            <div>
                                <p class="text-sm font-medium text-gray-900">김철수</p>
                                <p class="text-xs text-gray-500">주담당자 • 설계팀</p>
                            </div>
                        </div>
                        
                        <div class="flex items-center space-x-3">
                            <div class="w-10 h-10 bg-green-500 rounded-full flex items-center justify-center">
                                <span class="text-white font-medium">이</span>
                            </div>
                            <div>
                                <p class="text-sm font-medium text-gray-900">이영수</p>
                                <p class="text-xs text-gray-500">검토자 • 안전팀</p>
                            </div>
                        </div>
                        
                        <div class="flex items-center space-x-3">
                            <div class="w-10 h-10 bg-purple-500 rounded-full flex items-center justify-center">
                                <span class="text-white font-medium">박</span>
                            </div>
                            <div>
                                <p class="text-sm font-medium text-gray-900">박영희</p>
                                <p class="text-xs text-gray-500">승인자 • 현대중공업</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 처리 이력 -->
                <div class="bg-white rounded-lg shadow p-6">
                    <h3 class="text-lg font-semibold text-gray-900 mb-4">처리 이력</h3>
                    
                    <div class="space-y-4">
                        <div class="timeline-item flex items-start space-x-3">
                            <div class="w-8 h-8 bg-green-500 rounded-full flex items-center justify-center flex-shrink-0">
                                <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                                </svg>
                            </div>
                            <div class="flex-1">
                                <p class="text-sm font-medium text-gray-900">코멘트 접수</p>
                                <p class="text-xs text-gray-500">2024.03.15 09:30</p>
                                <p class="text-xs text-gray-600 mt-1">현대중공업에서 코멘트 등록</p>
                            </div>
                        </div>
                        
                        <div class="timeline-item flex items-start space-x-3">
                            <div class="w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center flex-shrink-0">
                                <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                                </svg>
                            </div>
                            <div class="flex-1">
                                <p class="text-sm font-medium text-gray-900">검토 시작</p>
                                <p class="text-xs text-gray-500">2024.03.15 10:15</p>
                                <p class="text-xs text-gray-600 mt-1">김철수가 검토 시작</p>
                            </div>
                        </div>
                        
                        <div class="timeline-item flex items-start space-x-3">
                            <div class="w-8 h-8 bg-yellow-500 rounded-full flex items-center justify-center flex-shrink-0">
                                <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                </svg>
                            </div>
                            <div class="flex-1">
                                <p class="text-sm font-medium text-gray-900">추가 자료 요청</p>
                                <p class="text-xs text-gray-500">2024.03.15 14:20</p>
                                <p class="text-xs text-gray-600 mt-1">구조 해석 자료 요청</p>
                            </div>
                        </div>
                        
                        <div class="timeline-item flex items-start space-x-3">
                            <div class="w-8 h-8 bg-gray-300 rounded-full flex items-center justify-center flex-shrink-0">
                                <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                </svg>
                            </div>
                            <div class="flex-1">
                                <p class="text-sm font-medium text-gray-500">답변 대기</p>
                                <p class="text-xs text-gray-400">진행 예정</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 유사 코멘트 -->
                <div class="bg-white rounded-lg shadow p-6">
                    <h3 class="text-lg font-semibold text-gray-900 mb-4">유사 코멘트</h3>
                    
                    <div class="space-y-3">
                        <div class="border border-gray-200 rounded-lg p-3">
                            <div class="flex items-center justify-between mb-2">
                                <span class="text-sm font-medium text-gray-900">CM-2024-0089</span>
                                <span class="text-xs bg-green-100 text-green-800 px-2 py-1 rounded-full">해결됨</span>
                            </div>
                            <p class="text-xs text-gray-700 mb-2">파이프 라인 간섭 문제 (유사도: 95%)</p>
                            <button onclick="viewSimilarComment('CM-2024-0089')" class="text-xs text-blue-600 hover:text-blue-800">해결 방안 보기</button>
                        </div>
                        
                        <div class="border border-gray-200 rounded-lg p-3">
                            <div class="flex items-center justify-between mb-2">
                                <span class="text-sm font-medium text-gray-900">CM-2024-0067</span>
                                <span class="text-xs bg-green-100 text-green-800 px-2 py-1 rounded-full">해결됨</span>
                            </div>
                            <p class="text-xs text-gray-700 mb-2">엔진실 배관 재배치 (유사도: 87%)</p>
                            <button onclick="viewSimilarComment('CM-2024-0067')" class="text-xs text-blue-600 hover:text-blue-800">해결 방안 보기</button>
                        </div>
                        
                        <div class="border border-gray-200 rounded-lg p-3">
                            <div class="flex items-center justify-between mb-2">
                                <span class="text-sm font-medium text-gray-900">CM-2024-0045</span>
                                <span class="text-xs bg-green-100 text-green-800 px-2 py-1 rounded-full">해결됨</span>
                            </div>
                            <p class="text-xs text-gray-700 mb-2">안전 간격 기준 미달 (유사도: 82%)</p>
                            <button onclick="viewSimilarComment('CM-2024-0045')" class="text-xs text-blue-600 hover:text-blue-800">해결 방안 보기</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script>
        // 위험도 분석 새로고침
        function refreshRiskAnalysis() {
            // 로딩 상태 표시
            const refreshBtn = document.querySelector('[onclick="refreshRiskAnalysis()"]');
            refreshBtn.innerHTML = '<svg class="w-4 h-4 animate-spin" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg>';
            
            setTimeout(() => {
                // 위험도 점수 업데이트 시뮬레이션
                const riskScores = document.querySelectorAll('[class*="위험도:"]');
                riskScores.forEach(score => {
                    const currentScore = parseInt(score.textContent.match(/\d+/)[0]);
                    const newScore = Math.max(10, Math.min(99, currentScore + Math.floor(Math.random() * 10) - 5));
                    score.textContent = `위험도: ${newScore}%`;
                });
                
                // 새로고침 버튼 복원
                refreshBtn.innerHTML = '<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg>';
                
                alert('AI 위험도 분석이 업데이트되었습니다.\n\n• 코멘트 내용 재분석 완료\n• 긴급성/중요도 매트릭스 갱신\n• 새로운 패턴 감지');
            }, 2000);
        }

        // 코멘트 선택 (아이젠하워 매트릭스에서)
        function selectComment(commentId) {
            // 모든 코멘트 카드에서 선택 상태 제거
            document.querySelectorAll('.comment-card').forEach(card => {
                card.classList.remove('ring-2', 'ring-blue-500');
            });
            
            // 아이젠하워 매트릭스의 모든 항목에서 선택 상태 제거
            document.querySelectorAll('[id^="quadrant"] > div').forEach(item => {
                item.classList.remove('ring-2', 'ring-blue-500');
            });
            
            // 선택된 코멘트 카드에 하이라이트 추가
            const selectedCard = document.querySelector(`[data-comment-id="${commentId}"]`);
            if (selectedCard) {
                selectedCard.classList.add('ring-2', 'ring-blue-500');
            }
            
            // 아이젠하워 매트릭스에서 선택된 항목 하이라이트
            const selectedMatrixItem = document.querySelector(`[onclick="selectComment('${commentId}')"]`);
            if (selectedMatrixItem) {
                selectedMatrixItem.classList.add('ring-2', 'ring-blue-500');
            }
            
            // 상세 정보 업데이트
            updateCommentDetails(commentId);
        }

        function updateCommentDetails(commentId) {
            // 코멘트별 상세 정보 (실제 구현에서는 API에서 가져옴)
            const commentData = {
                'CM-2024-0156': {
                    id: 'CM-2024-0156',
                    shipowner: '현대중공업',
                    category: '설계 변경',
                    priority: '긴급',
                    date: '2024년 3월 15일',
                    deadline: '2024년 3월 17일 (2일 남음)',
                    content: '엔진실 내 냉각수 파이프 라인과 연료 공급 라인 간의 간섭이 발생하고 있습니다...'
                },
                'CM-2024-0155': {
                    id: 'CM-2024-0155',
                    shipowner: '현대중공업',
                    category: '안전 규정',
                    priority: '보통',
                    date: '2024년 3월 14일',
                    deadline: '2024년 3월 20일 (5일 남음)',
                    content: '안전 규정 준수 여부에 대한 확인이 필요합니다...'
                }
            };

            const data = commentData[commentId] || commentData['CM-2024-0156'];
            
            // 상세 정보 업데이트
            const detailsContainer = document.getElementById('commentDetails');
            // 실제 구현에서는 여기서 DOM 업데이트
        }

        // 빠른 액션 함수들
        function respondToComment() {
            document.querySelector('textarea[id="responseContent"]').focus();
        }

        function assignTask() {
            alert('업무 할당 모달을 엽니다.\n\n담당자를 선택하고 업무를 할당할 수 있습니다.');
        }

        function scheduleFollowUp() {
            alert('후속 일정을 등록합니다.\n\n• 회의 일정\n• 검토 일정\n• 마감일 연장');
        }

        function escalateIssue() {
            alert('이슈를 에스컬레이션합니다.\n\n상급자에게 긴급 검토를 요청합니다.');
        }

        // 답변 관련 함수들
        function submitResponse(event) {
            event.preventDefault();
            
            const responseType = document.getElementById('responseType').value;
            const responseContent = document.getElementById('responseContent').value;
            
            if (!responseContent.trim()) {
                alert('답변 내용을 입력해주세요.');
                return;
            }
            
            alert(`답변이 전송되었습니다.\n\n유형: ${responseType}\n내용: ${responseContent.substring(0, 50)}...`);
        }

        function saveAsDraft() {
            alert('답변이 임시저장되었습니다.');
        }

        function useTemplate() {
            const templates = {
                'technical': '기술적 검토 결과, 다음과 같이 답변드립니다...',
                'schedule': '일정 검토 결과, 다음과 같이 계획하겠습니다...',
                'cost': '비용 분석 결과, 다음과 같습니다...',
                'clarification': '추가 확인이 필요한 사항이 있어 문의드립니다...'
            };
            
            const responseType = document.getElementById('responseType').value;
            document.getElementById('responseContent').value = templates[responseType] || templates['technical'];
        }

        function previewResponse() {
            const content = document.getElementById('responseContent').value;
            alert(`답변 미리보기:\n\n${content}`);
        }

        // 기타 함수들
        function editComment() {
            alert('코멘트 편집 모드로 전환합니다.');
        }

        function duplicateComment() {
            alert('코멘트를 복제합니다.');
        }

        function exportComment() {
            alert('코멘트를 PDF로 내보냅니다.');
        }

        function shareComment() {
            alert('코멘트 공유 링크를 생성합니다.');
        }

        function viewSimilarComment(commentId) {
            alert(`유사 코멘트 ${commentId}의 해결 방안을 확인합니다.`);
        }

        function goBack() {
            alert('이전 화면으로 돌아갑니다.');
        }

        // 파일 업로드 처리
        document.getElementById('file-upload').addEventListener('change', function(e) {
            const files = e.target.files;
            if (files.length > 0) {
                alert(`${files.length}개 파일이 선택되었습니다.`);
            }
        });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'991519c241e9326b',t:'MTc2MDkyNzUwNC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
